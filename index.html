import { useState, useEffect } from "react";
import { motion, AnimatePresence } from "framer-motion";
import { Button } from "@/components/ui/button";

const slides = [
  {
    id: 1,
    content: "Hii my love ❤️",
    bg: "bg-gradient-to-br from-pink-200 to-pink-500",
  },
  {
    id: 2,
    content: "You are the reason behind my smile 😊",
    bg: "bg-gradient-to-br from-yellow-100 to-yellow-300",
  },
  {
    id: 3,
    content: "My everything, my whole universe 🌍",
    bg: "bg-gradient-to-br from-blue-100 to-blue-300",
  },
  {
    id: 4,
    content: "I miss you so much 😢",
    bg: "bg-gradient-to-br from-purple-200 to-purple-400",
  },
  {
    id: 5,
    content: "You make my world brighter 💫",
    bg: "bg-gradient-to-br from-green-100 to-green-300",
  },
  {
    id: 6,
    content: "Please tap to reveal the final message ❤️",
    bg: "bg-gradient-to-br from-red-100 to-red-400",
  },
];

export default function LoveSlides() {
  const [current, setCurrent] = useState(0);
  const [showPopup, setShowPopup] = useState(false);

  useEffect(() => {
    if (current === slides.length - 1) {
      const timer = setTimeout(() => setShowPopup(true), 4000);
      return () => clearTimeout(timer);
    }
  }, [current]);

  return (
    <div className={`w-full h-screen flex items-center justify-center ${slides[current].bg} transition-all duration-1000 relative overflow-hidden`}>
      {/* Sparkle Particles */}
      <div className="absolute inset-0 pointer-events-none z-0">
        <div className="animate-pulse opacity-30 w-full h-full bg-[url('/sparkle.svg')] bg-cover bg-repeat"></div>
      </div>

      {/* Slide Content */}
      <AnimatePresence mode="wait">
        <motion.div
          key={slides[current].id}
          initial={{ opacity: 0, y: 50 }}
          animate={{ opacity: 1, y: 0 }}
          exit={{ opacity: 0, y: -50 }}
          transition={{ duration: 0.8 }}
          className="text-center p-4 z-10"
        >
          <h1 className="text-4xl font-bold text-white drop-shadow-md">
            {slides[current].content}
          </h1>
        </motion.div>
      </AnimatePresence>

      {/* Next Button */}
      {current < slides.length - 1 && (
        <Button
          onClick={() => setCurrent((prev) => prev + 1)}
          className="absolute bottom-10 animate-pulse z-10 bg-white text-rose-500 hover:bg-rose-100 border border-rose-300 rounded-full px-6 py-2 font-bold shadow-lg"
        >
          Next ➡️
        </Button>
      )}

      {/* Final Love Letter Popup */}
      {showPopup && (
        <motion.div
          initial={{ opacity: 0, scale: 0.5 }}
          animate={{ opacity: 1, scale: 1 }}
          transition={{ duration: 0.7, type: "spring" }}
          className="absolute inset-0 bg-white/90 flex items-center justify-center z-50 backdrop-blur-md"
        >
          <motion.div
            initial={{ scale: 0 }}
            animate={{ scale: 1 }}
            transition={{ type: "spring", stiffness: 200, damping: 20 }}
            className="bg-white p-8 rounded-3xl shadow-2xl text-center relative border-4 border-rose-300"
          >
            <h2 className="text-4xl font-bold mb-4 text-rose-600 animate-pulse">
              💌 My Love Letter 💌
            </h2>
            <p className="text-lg text-gray-800 max-w-md">
              My dearest love,
              <br />
              You are the light that guides me, the strength that carries me. I cherish every moment with you and long for the day we can create many more memories. 💖
            </p>
            <div className="absolute -top-5 -right-5">
              <motion.div
                className="w-10 h-10 rounded-full bg-pink-400 shadow-lg animate-ping"
                animate={{ scale: [1, 1.2, 1] }}
                transition={{ repeat: Infinity, duration: 1.5 }}
              ></motion.div>
            </div>
          </motion.div>
        </motion.div>
      )}
    </div>
  );
}
